<!--
A calendar day that includes the moon phase.
-->

<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../basic-shared/basic-shared.html">
<link rel="import" href="../basic-calendar-day.html">
<link rel="import" href="moon-phase.html">

<!--
TODO: This class should extend basic-calendar-day once Polymer supports
subclassing again. For now, this includes an *instance* of basic-calendar-day,
which isn't as efficient, and also creates styling problems.
-->

<dom-module id="calendar-day-moon-phase">
  <template>

    <style>
    basic-calendar-day {
      display: block;
    }

    :host([generic='']) #day {
      text-align: right;
    }

    moon-phase {
      height: 1.5em;
      width: 1.5em;
    }
    </style>

    <basic-calendar-day date="{{date}}">
      <div id="day"></div>
      <moon-phase date="{{date}}"></moon-phase>
    </basic-calendar-day>

  </template>
</dom-module>

<script>
Polymer({

  behaviors: [
    Basic.Generic
  ],

  is: 'calendar-day-moon-phase',

  properties: {
    /**
     * The date shown in this element.
     *
     * @attribute date
     * @type Date
     * @default today
     */
    date: {
      type: Date,
      reflectToAttribute: true,
      observer: '_dateChanged'
    }
  },

  // TODO: accept both Date objects and date strings.
  _dateChanged: function() {
    var date = this.date;
    this.$.day.textContent = date.getDate();
  }

});
</script>
