<!--
A component that produces a popup.

@element basic-popup-source
@demo http://basic-web-components.github.io/basic-web-components/src/basic-popup-source/?dom=shadow
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../basic-popup/basic-popup.html">

<dom-module id="basic-popup-source">
  <template>

    <style>
    #sourceContainer {
      display: inline-block;
    }
    </style>

    <div id="sourceContainer" on-click="_sourceClick">
      <content select=":not(.popup)"></content>
    </div>
    <basic-popup id="popup" no-auto-focus with-backdrop>
      <content select=".popup"></content>
    </basic-popup>

  </template>
</dom-module>

<script>
Polymer({

  cancel: function() {
    this.$.popup.cancel();
  },

  close: function() {
    this.$.popup.close();
  },

  is: 'basic-popup-source',

  properties: {

    /**
     * Set to true to disable the automatic opening on a click inside the popup
     * source.
     */
    dontOpenOnClick: {
      type: Boolean
    },

  },

  open: function() {
    this.$.popup.open();
  },

  get opened() {
    return this.$.popup.opened;
  },

  // Return the popup element.
  get popup() {
    return this.$.popup;
  },

  ready: function() {
    this.$.popup.fitInto = this.$.sourceContainer;
  },

  toggle: function() {
    this.$.popup.toggle();
  },

  _sourceClick: function() {
    if (!this.dontOpenOnClick) {
      this.open();
    }
  }

});
</script>
